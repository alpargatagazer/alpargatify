services:
  beets:
    build:
      context: ./beets
    image: local/beets:latest
    container_name: beets_importer
    # Mount the destination music directory at /data (where beets operates)
    # and mount your beets config file.
    volumes:
      - "${DEST_PATH}:/data:rw"
      - "${BEETS_CONFIG}:/config.yaml:ro"
    environment:
      - BEETS_CONFIG_PATH=/config.yaml
    # one-shot: run and exit; compose won't try to restart
    restart: "no"
    entrypoint: ["/entrypoint.sh"]
